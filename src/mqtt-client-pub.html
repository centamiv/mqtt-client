<!-- build:[href] ../polymer/ -->
<link rel="import" href="../bower_components/polymer/polymer.html">
<!-- /build -->
<polymer-element name="mqtt-client-pub" attributes="ref topic message">
    <template>
        <mqtt-client id="{{ref}}"></mqtt-client>
    </template>
    <script src="mqttws31.js"></script>
    <script>
        Polymer({

            // Public Properties
            ref: "",
            topic: "",
            message: "",

            // Public Methods
            go: function () {
                var ref = this.$[this.ref];
                if (typeof ref === 'undefined')
                    return;
                var exp = ref._exp;
                if (typeof exp === 'undefined' || !exp.isConnected())
                    return;
                var message = new Paho.MQTT.Message(this.message);
                message.destinationName = this.topic;
                exp.mqtt.send(message);
            }

        });
    </script>
</polymer-element>