{"name":"mqtt-client","tagline":"Polymer element that implement a client for the MQTT protocol via WebSocket. It is capable of Publish messages and Subscribe multiple topics.","body":"# Installation\r\n\r\nUsing **bower**:\r\n\r\n```\r\nbower install --save mqtt-client\r\n```\r\n\r\n# MQTT-CLIENT\r\n\r\n*mqtt-client* is a static element that performs the connection to a MQTT broker listening on a WebSocket TCP port.\r\n\r\nThis element must be declared inside every custom element that uses *mqtt-client-sub* or *mqtt-client-pub*. If multiple *mqtt-client* with the same *id* have been declared, only the one with *host* and *port* parameters manages the connection, the other only refers to that one. See **Separating elements**.\r\n\r\n### Example\r\n\r\nThe following code instantiate the element and automatically connect to the broker:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\"\r\n\t             host=\"broker.mqtt-dashboard.com\"\r\n\t             port=\"8000\"\r\n\t             connected=\"{{conn}}\">\r\n\t</mqtt-client>\r\n\t<p>\r\n\t\tConnected: {{conn}}\r\n\t</p>\r\n</template>\r\n```\r\n\r\nIf you want to control the connection you should disable the *autoConnect* property:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\"\r\n\t             host=\"broker.mqtt-dashboard.com\"\r\n\t             port=\"8000\"\r\n\t             autoConnect=\"false\"\r\n\t             connected=\"{{conn}}\">\r\n\t</mqtt-client>\r\n\t<p>\r\n\t\t<button type=\"submit\" on-tap=\"{{connectEvent}}\">{{conn ? \"Disconnect\" : \"Connect\"}}</button>\r\n\t</p>\r\n</template>\r\n<script>\r\n\tPolymer({\r\n\t\tconnectEvent: function() {\r\n            if (this.connected) {\r\n                this.$.myclient.disconnect();\r\n            } else {\r\n                this.$.myclient.connect();\r\n            }\r\n        }\r\n\t});\r\n</script>\r\n```\r\n\r\n### Attributes\r\n\r\n**Attribute** | Type | Description | Default\r\n--- | --- | --- | ---\r\n**id** | string | **(required)** The id of the component. More than one client that connect to different Broker could exist and work at the same time, so is important to identify all the clients in an application. | *undefined*\r\n**host** | string | **(required)** Address of the broker | \"\"\r\n**port** | number | **(required)** Port of the broker's websocket listener | 0\r\n**clientName** | string | Name of the client | *auto generated uuid*\r\n**userName** | string | Username, if required by the broker | \"\"\r\n**password** | string | Password | \"\"\r\n**ssl** | boolean | Use SSL for the connection (wss) | false\r\n**autoConnect** | boolean | Connect to the broker immediatly after the element is ready | true\r\n**autoRetry** | boolean | In case of connection lost, the component will retry the connection every *timeout* seconds. All the subscriptions and the callbacks defined when the connection was up will be restored automatically | true\r\n**timeout** | number | Interval in seconds for the *autoRetry* action and connection lost timeout | 3\r\n**connected** | boolean | **(read only)** The state of the connection | false\r\n\r\n### Methods\r\n\r\n**Method** | Description\r\n--- | ---\r\n**connect()** | Open the connection to the broker \r\n**disconnect()** | Disconnect from the broker\r\n\r\n# MQTT-CLIENT-SUB\r\n\r\n*mqtt-client-sub* is an element which lets you subscribe to a topic.\r\n\r\n### Example\r\n\r\nThe following code will connect to the broker and subscribes all the topics:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\"\r\n\t             host=\"broker.mqtt-dashboard.com\"\r\n\t             port=\"8000\"\r\n\t             connected=\"{{conn}}\">\r\n\t</mqtt-client>\r\n\t<mqtt-client-sub ref=\"myclient\"\r\n\t                 topic=\"#\"\r\n\t                 message=\"{{message}}\"\r\n\t                 prog=\"{{messageCount}}\"></mqtt-client-sub>\r\n\t<p>\r\n\t\tConnected: {{conn}}<br>\r\n\t\tMessage received: {{message}}<br>\r\n\t\tMessage count: {{messageCount}}\r\n\t</p>\r\n</template>\r\n```\r\n\r\nOf course you can subscribe multiple topics:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\"\r\n\t             host=\"broker.mqtt-dashboard.com\"\r\n\t             port=\"8000\"\r\n\t             connected=\"{{conn}}\">\r\n\t</mqtt-client>\r\n\t<mqtt-client-sub ref=\"myclient\"\r\n\t                 topic=\"mytopic/one\"\r\n\t                 message=\"{{message1}}\"></mqtt-client-sub>\r\n\t<mqtt-client-sub ref=\"myclient\"\r\n\t                 topic=\"othertopic/two\"\r\n\t                 message=\"{{message2}}\"></mqtt-client-sub>\r\n\t<p>\r\n\t\tConnected: {{conn}}<br>\r\n\t\tMessage received from \"mytopic/one\": {{message1}}<br>\r\n\t\tMessage received from \"othertopic/two\": {{message2}}\r\n\t</p>\r\n</template>\r\n```\r\n\r\n### Attributes\r\n\r\n**Attribute** | Type | Description | Default\r\n--- | --- | --- | ---\r\n**ref** | string | **(required)** The id of the *mqtt-client* component which manage the connection | *undefined*\r\n**topic** | string | **(required)** Topic to subscribe. Standard wildcards (# and +) are supported. After the subscription, this attribute will contain the topic reltive to the *message* received | \"\"\r\n**message** | string | **(read only)** The message payload received from the broker | \"\"\r\n**count** | number | **(read only)** Progressive number, increased every time a message is received. Useful when the payload (and so the *message* attribute) don't change among contiguous messages | 0\r\n**qos** | number | Quality of service | 0\r\n**autoRetry** | boolean | Automatically retry the subscription if the connection was down when the element was instantiated | true\r\n\r\n# MQTT-CLIENT-PUB\r\n\r\nPublish messages on a topic.\r\n\r\n### Example\r\n\r\nThe following code connects to the broker, subscribes a specific topic and lets you enter a message to publish:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\"\r\n\t             host=\"broker.mqtt-dashboard.com\"\r\n\t             port=\"8000\"\r\n\t             connected=\"{{conn}}\">\r\n\t</mqtt-client>\r\n\t<mqtt-client-sub ref=\"myclient\"\r\n\t                 topic=\"demo/polymer\"\r\n\t                 message=\"{{messageSub}}\"></mqtt-client-sub>\r\n\t<mqtt-client-pub ref=\"myclient\"\r\n\t                 topic=\"{{topic}}\"\r\n\t                 message=\"{{message}}\"\r\n\t                 id=\"publisher1\"></mqtt-client-pub>\r\n\t<p>\r\n\t\tConnected: {{conn}}<br>\r\n\t\tMessage received from \"demo/polymer\": {{messageSub}}<br>\r\n\t</p>\r\n\t<p>\r\n\t\tPublish a message:<br>\r\n\t\tTopic: <input value=\"{{topic}}\"><br>\r\n\t\tMessage: <input value=\"{{message}}\"><br>\r\n\t\t<button type=\"submit\" on-tap=\"{{sendEvent}}\">Publish</button>\r\n\t</p>\r\n</template>\r\n<script>\r\n\tPolymer({\r\n\t\ttopic: \"demo/polymer\",\r\n\t\tsendEvent: function() {\r\n            this.$.publisher1.go();\r\n        }\r\n\t});\r\n</script>\r\n```\r\n\r\n### Attributes\r\n\r\n**Attribute** | Type | Description | Default\r\n--- | --- | --- | ---\r\n**ref** | string | **(required)** The id of the *mqtt-client* component which manage the connection | *undefined*\r\n**topic** | string | **(required)** Topic to publish to | \"\"\r\n**message** | string | **(read only)** The message payload to publish | \"\"\r\n\r\n### Methods\r\n\r\n**Method** | Description\r\n--- | ---\r\n**go()** | Publish the message \r\n\r\n\r\n\r\n# Separating elements\r\n\r\nThe architecture of the *mqtt-client* lets you dislocate the elements between the components of your application. For instance, you could connect to the broker on a custom element, publish and/or receive messages inside other custom elements.\r\n\r\n### Example\r\n\r\nThis example shows an ipotetic separation scenario. On every custom element you must instantiate the *mqtt-client* but provide the connection information only once:\r\n\r\n```html\r\n<polymer-element name=\"custom-element-1\">\r\n\t<template>\r\n\t\t<mqtt-client id=\"myclient\" host=\"broker.mqtt-dashboard.com\" port=\"8000\">\r\n\t\t</mqtt-client>\r\n\t</template>\r\n</polymer-element>\r\n\r\n<polymer-element name=\"custom-element-2\">\r\n\t<template>\r\n\t\t<mqtt-client id=\"myclient\"></mqtt-client> <!-- refers to the myclient defined in custom-element-1 -->\r\n\t\t<mqtt-client-sub ref=\"myclient\" topic=\"#\" message=\"{{message}}\"></mqtt-client-sub>\r\n\t\t{{message}}\r\n\t</template>\r\n</polymer-element>\r\n\r\n<polymer-element name=\"custom-element-3\">\r\n\t<template>\r\n\t\t<mqtt-client id=\"myclient\"></mqtt-client> <!-- refers to the myclient defined in custom-element-1 -->\r\n\t\t<mqtt-client-pub ref=\"myclient\" topic=\"foo\" message=\"hey\" id=\"publisher1\"></mqtt-client-pub>\r\n\t\t<button type=\"submit\" on-tap=\"{{sendEvent}}\">Say Hey!</button>\r\n\t</template>\r\n\t<script>\r\n\t\tPolymer({\r\n\t\t\tsendEvent: function() {\r\n\t            this.$.publisher1.go();\r\n\t        }\r\n\t\t});\r\n\t</script>\r\n</polymer-element>\r\n```\r\n\r\n# Multiple connections\r\n\r\nOf course you can manage multiple brokers at the same time inside your elements:\r\n\r\n```html\r\n<template>\r\n\t<mqtt-client id=\"myclient\" host=\"broker.mqtt-dashboard.com\" port=\"8000\"></mqtt-client>\r\n\t<mqtt-client id=\"otherclient\" host=\"127.0.0.1\" port=\"8000\"></mqtt-client>\r\n\t<mqtt-client-sub ref=\"myclient\" topic=\"#\" message=\"{{message1}}\"></mqtt-client-sub>\r\n\t<mqtt-client-sub ref=\"otherclient\" topic=\"#\" message=\"{{message2}}\"></mqtt-client-sub>\r\n\t<p>{{message1}}</p>\r\n\t<p>{{message2}}</p>\r\n</template>\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}