<link rel="import" href="bower_components/polymer/polymer.html">
<polymer-element name="mqtt-client-pub" attributes="ref topic message">
    <template>
        <mqtt-client id="{{ref}}"></mqtt-client>
        </template>
    <script src="bower_components/org.eclipse.paho.mqtt.javascript/src/mqttws31.js"></script>
    <script>
    Polymer({

        // init public properties
        ref: "",
        topic: "",
        message: "",

        // init private properties
        _client: function() {
            return this.$[this.ref]._exp;
        },

        go: function() {
            var message = new Paho.MQTT.Message(this.message);
            message.destinationName = this.topic;
            this._client().mqtt.send(message);
        }

    });
    </script>
</polymer-element>